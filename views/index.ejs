<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title><%= title %></title>
  </head>
  <body>
    <h1><%= title %></h1>
    <%- include('partials/error.ejs') %>
    <!-- Assignment -->
    <form action="/search" method="GET">
      <label for="firstName">Search user: </label>
      <input type="text" name="firstName" id="firstName" required placeholder="User's first name..."/>
      <button type="submit">Search</button>
    </form>
    <!-- Assignment -->
    <ul>
      <!-- prettier ignore -->
      <% if (locals.users) { %> 
        <% users.forEach(user => { %>
          <li>ID: <%= user.id %>, Name: <%= user.firstName %> <%= user.lastName %></li>
          <li>Email: <%= user.email %>, Age: <%= user.age ? user.age : "N/A" %></li>
          <li>Bio: <%= user.bio ? user.bio : "N/A" %></li>
          <a href="/<%= user.id %>/update">Update</a>
          <form action="/<%= user.id %>/delete" method="POST" style="display: inline">
            <button type="submit" onClick="return confirm('Are you sure you want to delete this user?')">Delete</button>
          </form>
        <% }) %> 
      <% } %>
    </ul>
    <a href="/create" style="padding-bottom: 1rem;">Create a user</a>
  </body>
</html>
